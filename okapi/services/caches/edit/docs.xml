<xml>
    <brief>Edit an existing geocache listing</brief>
    <issue-id>510</issue-id>
    <desc>
        <p>This method allows your user to change the contents of an owned
        geocache listing. Please note that you won't be able to use this
        method until you learn to handle OAuth.</p>

        <p>Note: Some OCPL-based sites support only BMP (Basic Multilingual Plane) Unicode
        characters for textual content. If you submit characters from outside of
        the BMP plane (known as "supplementary planes", they include characters such
        as smiley symbols), then keep in mind that texts like the cache description
        might be saved garbled.</p>
    </desc>
    <req name='cache_code'>
        <p>Code of the geocache.</p>
    </req>
    <opt name='name'>
        <p>New name of the cache. The old name to be replaced must be supplied
        as <b>old_name</b>.</p>
    </opt>
    <opt name='old_name'>
        <p>The old cache name to be replaced.</p>
        <p>This argument is for compatibility with future OC sites, which may
        store multiple cache names in different languages. If the supplied
        string does not match any existing name of the cache, you will receive
        an HTTP 400 error response.</p>
    </opt>
    <opt name='location'>
        <p>New location of the cache in the "lat|lon" format (<i>lat</i> and
        <i>lon</i> are in full degrees with a dot as a decimal point).</p>
    </opt>
    <opt name='type'>
        <p>New type of the cache; one of the identifiers listed in the <b>types</b>
        field of <a href='%OKAPI:methodargref:services/caches/capabilities%'>services/caches/capabilities</a>.</p>
    </opt>
    <opt name='size'>
        <p>New size of the cache; one of the identifiers listed in the <b>sizes</b>
        field of <a href='%OKAPI:methodargref:services/caches/capabilities%'>services/caches/capabilities</a>.</p>
    </opt>
    <opt name='difficulty'>
        <p>New difficulty estimation for the cache; a multiple of 0.5 in the
        range from <b>1</b> to <b>5</b>.</p>
    </opt>
    <opt name='terrain'>
        <p>New terrain estimation for the cache; a multiple of 0.5 in the
        range from <b>1</b> to <b>5</b>.</p>
    </opt>
    <opt name='trip_time'>
        <p>New estimation for the total time needed to find the cache, in hours
        (&gt;= 1 minute); this will usually include the time to reach the cache
        location <i>and</i> go back (from/to a parking spot, etc.); or <b>null</b>
        for "unspecified".</p>
    </opt>
    <opt name='trip_distance'>
        <p>New estimation for the total distance needed to find the cache, in
        kilometers (&gt;= 0.01); this will usually include the time to reach the
        cache location <i>and</i> go back (from/to a parking spot, etc.); or
        <b>null</b> for "unspecified".</p>
    </opt>
    <opt name='attributes'>
        <p>A pipe-separated list of A-codes to be added to or removed from
        the cache's attribute set. A-codes with a prepended minus (-)
        will be removed instead of added. If you try to add and remove the
        same attribute, you will receive an HTTP 400 error response.</p>
        <p>Call the
        <a href='%OKAPI:methodargref:services/attrs/attribute_index%'>services/attrs/attribute_index</a>
        method with <b>only_locally_used</b>=<b>true</b> to obtain a list of
        available A-codes. You may want to request the <b>incompatible_acodes</b>
        field and avoid to submit conflicting A-codes. (They would yield a
        <b>success</b>=<b>false</b> response.)</p>
    </opt>
    <opt name='description'>
        <p>HTML string, new description of the cache. The language of the
        description must be supplied as <b>language</b> argument. If a
        description for this language already exists, it will be replaced;
        else a new description will be added.</p>
        <p><b>Note:</b> It is <i>recommended</i> to let your user maintain
        descriptions, short descriptions and hints of a cache in "language
        sets", as it is implemented on OC sites. The user will edit all
        these three texts on the same page. To delete a "language set",
        submit empty strings for all three parameters.</p> 
    </opt>
    <opt name='short_description'>
        <p>A plaintext string with a new single line (very short) description
        of the cache (kind of a "tagline text"). The language of the short
        description must be supplied as <b>language</b> argument. If a
        short description for this language already exists, it will be
        replaced; else a new short description will be added.</p>
    </opt>
    <opt name='hint'>
        <p>A plaintext, optional multiline string of cache hints/spoilers;
        will usually be ROT13-encoded for display. The language of the hint
        must be supplied as <b>language</b> argument. If a hint for this
        language already exists, it will be replaced; else a new hint will
        be added.</p>
    </opt>
    <opt name='language'>
        <p>The language of the given <b>short_description</b>, <b>description</b>
        and <b>hint</b> texts; one of the language codes as returned in the
        <b>languages</b> field of
        <a href='%OKAPI:methodargref:services/caches/capabilities%'>services/caches/capabilities</a>.</p>
    </opt>
    <opt name='passwd'>
        <p>The new password for 'Found it' or 'Attended' log entries.
        If you supply an empty string, the password will be cleared, i.e.
        the geocache will not require a log password.</p>
        <p>You may query the maximum accepted password length for the OC site by
        <a href='%OKAPI:methodargref:services/caches/capabilities%'>services/caches/capabilities</a>.
        There may also be installation-dependent restrictions on which
        geocaches may have passwords. <b>success</b> will be <b>false</b> and
        an explanation message will be returned if a password is rejected.</p>
    </opt>
    <opt name='gc_code'>
        <p>A Geocaching.com code (GC code) to be assigned with this OC
        listing, or <b>null</b> for "unspecified".</p>
    </opt>
    <opt name='langpref' default='en'>
        <p>Pipe-separated list of ISO 639-1 language codes. This indicates the
        order of preference in which language will be chosen for the
        <b>messages</b> return value.</p>
    </opt>
    <common-format-params/>
    <returns>
        <p>A dictionary of the following structure:</p>
        <ul>
            <li>
                <p><b>success</b> - boolean,</p>
                <ul>
                    <li><b>true</b> if all of the supplied geocache properties
                    were saved successfully or if no property to be changed was
                    supplied,</li>

                    <li><b>false</b> if nothing was saved, which means that at
                    least one of the supplied parameters was logically invalid.
                    E.g. the size "micro" was supplied for a type of cache
                    which does not have a container.</li>
                </ul>
            </li>
            <li>
                <p><b>messages</b> - a dictionary of the supplied parameters
                that were not acceptable, each entry giving a plain-text string
                that explains the reason of rejection. Each of the strings can
                consist of multiple lines, separated with newlines (\n). The
                dictionary is empty in case of success.</p>
            </li>
        </ul>
        <p>The method responds with an HTTP 400 error if parameters were
        formally invalid, e.g. an undefinied attribute ID or cache size
        was submitted.</p>
    </returns>
</xml>
